# 项目计划完善版
#### 组名：Genetic Recombination
#### 小组成员：张瑔 李佳玮 李奕萱 吴洵 赵润初 徐钲
#### 更新日期：2024年9月
————————————————————————

## 1. 项目概况
+ **游戏名称**：The Echo of HAMMER
+ **项目类型**：基于Web的像素RPG风格探索推理游戏
+ **技术栈**：HTML5 + CSS3 + JavaScript (原生)
+ **目标平台**：PC端浏览器（主要）+ 移动端浏览器（兼容）
+ **项目规模**：中型Web游戏项目，预计代码量15,000-20,000行

## 2. 详细工作量评估

### 2.1 页面数量统计
根据项目结构分析，共需完成以下页面：

#### 核心游戏页面（8个）
1. **主页/启动页** (start.html) - 游戏入口
2. **登录页面** (login.html) - 用户认证
3. **游戏主界面** (game.html) - 核心游戏画面
4. **暂停菜单** - 游戏内嵌页面
5. **成就系统页面** (achievement.html) - 成就展示
6. **存档管理页面** (continue.html) - 存档加载
7. **游戏结束页面** - 结局展示
8. **设置页面** - 游戏配置

#### 辅助功能页面（5个）
9. **个人主页** - 用户信息展示
10. **游戏介绍页面** - 剧情背景
11. **帮助/教程页面** - 操作指南
12. **小游戏页面** (Trex游戏等) - 内嵌小游戏
13. **开发工具页面** (wall-editor.html) - 地图编辑器

**总计：13个主要页面**

### 2.2 核心系统模块（10个）
1. **游戏引擎核心** (Overworld.js) - 游戏循环、渲染管理
2. **地图系统** (OverworldMap.js, MapConfigs.js) - 场景管理
3. **角色系统** (Person.js, GameObject.js) - 人物控制
4. **事件系统** (OverworldEvent.js) - 剧情触发
5. **输入系统** (DirectionInput.js, KeyPressListener.js) - 用户交互
6. **UI系统** (Hud.js, PauseMenu.js, TextMessage.js) - 界面管理
7. **存档系统** (Progress.js) - 数据持久化
8. **场景过渡** (SceneTransition.js) - 转场效果
9. **精灵动画** (Sprite.js) - 图像渲染
10. **工具系统** (utils.js, CoordinateDebugger.js) - 辅助功能

## 3. 详细任务分工

### 3.1 前端开发任务（核心）
#### 负责人：李佳玮（主力）、张瑔（协助）
- **游戏引擎优化**：性能提升、bug修复（已完成80%）
- **UI/UX改进**：界面美化、交互优化（待完成）
- **响应式适配**：移动端兼容性（待完成）
- **浏览器兼容**：跨浏览器测试（待完成）
- **预计工时**：120人时

### 3.2 游戏内容开发
#### 负责人：赵润初（主编）、李奕萱（文案）、吴洵（实现）
- **剧情系统完善**：对话树、分支逻辑（已完成90%）
- **关卡设计**：地图布局、谜题设计（已完成60%）
- **NPC交互**：角色对话、任务系统（已完成70%）
- **结局系统**：多重结局实现（待完成）
- **预计工时**：80人时

### 3.3 美术资源制作
#### 负责人：吴洵（主力）、李奕萱（协助）
- **角色精灵图**：主角、NPC动画（已完成80%）
- **场景背景**：地图、道具素材（已完成70%）
- **UI元素**：按钮、图标、界面（已完成50%）
- **特效动画**：过渡效果、粒子效果（待完成）
- **预计工时**：60人时

### 3.4 系统功能开发
#### 负责人：张瑔（存档）、赵润初（成就）、徐钲（提示）、李佳玮（证据）
- **存档系统**：本地存储、云端同步（已完成90%）
- **成就系统**：解锁机制、进度追踪（已完成80%）
- **提示系统**：智能提示、难度调节（已完成70%）
- **证据系统**：收集机制、推理逻辑（已完成60%）
- **预计工时**：100人时

### 3.5 测试与优化
#### 负责人：全体成员
- **功能测试**：系统功能验证（进行中）
- **兼容性测试**：多平台适配（待完成）
- **性能优化**：加载速度、内存管理（待完成）
- **用户体验测试**：可用性评估（待完成）
- **预计工时**：40人时

### 3.6 项目管理与文档
#### 负责人：徐钲（文档）、张瑔（管理）
- **技术文档**：API文档、开发指南（进行中）
- **用户手册**：操作说明、故障排除（待完成）
- **项目报告**：开发总结、经验分享（待完成）
- **预计工时**：30人时

**总计预估工时：430人时**

## 4. 技术方案详述

### 4.1 客户端存储方案
#### 主要技术：localStorage + IndexedDB
- **配置数据**：使用localStorage存储用户设置、游戏选项
- **存档数据**：使用IndexedDB存储游戏进度、成就记录
- **缓存策略**：实现资源缓存，提升加载性能
- **数据同步**：支持导入/导出功能，便于数据迁移

```javascript
// 存档系统示例
class SaveSystem {
  static save(slotId, gameData) {
    const saveData = {
      timestamp: Date.now(),
      progress: gameData,
      version: '1.0'
    };
    localStorage.setItem(`save_${slotId}`, JSON.stringify(saveData));
  }
}
```

### 4.2 响应式设计方案
#### 技术实现：CSS Grid + Flexbox + Media Queries
- **布局适配**：使用CSS Grid实现复杂布局
- **组件响应**：Flexbox处理组件内部布局
- **断点设计**：
  - 移动端：< 768px
  - 平板端：768px - 1024px  
  - 桌面端：> 1024px
- **触控优化**：移动端触控操作适配

### 4.3 性能优化方案
#### 资源管理
- **图片优化**：使用WebP格式，实现懒加载
- **代码分割**：按需加载游戏模块
- **缓存策略**：Service Worker实现离线缓存
- **内存管理**：及时释放不用的游戏对象

#### 渲染优化
- **Canvas优化**：使用离屏Canvas预渲染
- **动画优化**：requestAnimationFrame控制帧率
- **碰撞检测**：空间分割算法提升效率

### 4.4 兼容性保障
#### 浏览器支持
- **现代浏览器**：Chrome 80+, Firefox 75+, Safari 13+, Edge 80+
- **Polyfill策略**：为旧版浏览器提供必要的API支持
- **渐进增强**：核心功能优先，高级特性可选

#### 设备适配
- **输入方式**：键盘、鼠标、触屏多种输入支持
- **屏幕适配**：支持不同分辨率和像素密度
- **性能分级**：根据设备性能调整画质和特效

## 5. 人时预估与保障措施

### 5.1 总体时间规划
- **项目总工时**：430人时
- **团队规模**：6人
- **项目周期**：12周
- **平均每人每周**：6小时
- **关键里程碑**：
  - Week 4：核心引擎完成
  - Week 8：主要功能完成
  - Week 10：测试版本发布
  - Week 12：正式版本发布

### 5.2 风险评估与应对
#### 技术风险
- **风险**：浏览器兼容性问题
- **应对**：提前进行兼容性测试，准备备选方案

#### 进度风险
- **风险**：关键成员时间不足
- **应对**：任务交叉培训，建立备份开发者

#### 质量风险
- **风险**：游戏体验不佳
- **应对**：定期用户测试，及时收集反馈

### 5.3 质量保障措施
#### 代码质量
- **代码审查**：所有代码提交前进行同行评审
- **测试覆盖**：关键功能100%测试覆盖
- **文档规范**：完善的代码注释和API文档

#### 项目管理
- **每日站会**：跟踪进度，及时发现问题
- **周报制度**：定期汇报工作进展
- **版本控制**：使用Git进行代码版本管理

## 6. 当前项目状态

### 6.1 已完成工作（约60%）
- ✅ 游戏引擎核心框架
- ✅ 基础地图系统和角色控制
- ✅ 主要UI界面和交互逻辑
- ✅ 存档系统基础功能
- ✅ 剧情文案和对话系统
- ✅ 基础美术资源
- ✅ 开发工具（墙体编辑器）

### 6.2 进行中工作（约25%）
- 🔄 成就系统完善
- 🔄 证据收集系统
- 🔄 小游戏集成
- 🔄 移动端适配
- 🔄 性能优化

### 6.3 待完成工作（约15%）
- ⏳ 多结局系统实现
- ⏳ 高级特效和动画
- ⏳ 全面测试和调试
- ⏳ 用户手册和帮助系统
- ⏳ 最终打包和部署

---

# 附录：设计文档

## 附录A：站点地图（Site Map）

```
The Echo of HAMMER - 信息架构图

首页 (start.html)
├── 登录系统 (login.html)
│   ├── 注册页面
│   ├── 找回密码
│   └── 用户验证
├── 游戏主体 (game.html)
│   ├── 游戏世界
│   │   ├── 客厅场景 (LivingRoom)
│   │   ├── 卧室场景 (Bedroom)
│   │   ├── 厨房场景 (Kitchen)
│   │   └── 公寓走廊 (Hallway)
│   ├── 游戏界面
│   │   ├── 主视图 (Canvas)
│   │   ├── 对话框 (TextMessage)
│   │   ├── 暂停菜单 (PauseMenu)
│   │   └── HUD界面 (Hud)
│   └── 游戏系统
│       ├── 存档管理 (Progress)
│       ├── 成就系统 (Achievement)
│       ├── 证据收集 (Evidence)
│       └── 提示系统 (Hint)
├── 功能页面
│   ├── 个人主页
│   ├── 成就展示 (achievement.html)
│   ├── 游戏介绍
│   ├── 操作帮助
│   └── 设置选项
├── 小游戏模块
│   ├── T-Rex跑酷 (Trex.html)
│   ├── 解谜小游戏
│   └── 反应测试
└── 开发工具
    ├── 墙体编辑器 (wall-editor.html)
    ├── 坐标调试器
    └── 性能监控
```

## 附录B：线框图（Wireframes）

### B.1 主页线框图
```
+----------------------------------+
|            HEADER                |
|  [LOGO]     The Echo of HAMMER   |
+----------------------------------+
|                                  |
|         [START GAME]             |
|                                  |
|         [CONTINUE]               |
|                                  |
|         [ACHIEVEMENTS]           |
|                                  |
|         [SETTINGS]               |
|                                  |
|         [HELP]                   |
|                                  |
+----------------------------------+
|            FOOTER                |
|    © 2024 Genetic Recombination  |
+----------------------------------+
```

### B.2 登录页面线框图
```
+----------------------------------+
|            LOGIN                 |
+----------------------------------+
|                                  |
|    [用户名输入框]                 |
|                                  |
|    [密码输入框]                   |
|                                  |
|    [记住我] [忘记密码?]           |
|                                  |
|         [登录]                   |
|                                  |
|    还没有账号？[立即注册]         |
|                                  |
+----------------------------------+
```

### B.3 游戏主界面线框图
```
+----------------------------------+
|  [菜单] [存档] [设置]    [帮助]  |
+----------------------------------+
|                                  |
|                                  |
|        游戏画布区域               |
|      (Canvas 800x600)           |
|                                  |
|                                  |
+----------------------------------+
|  [证据:3] [提示] [成就] [进度条] |
+----------------------------------+
```

### B.4 对话界面线框图
```
+----------------------------------+
|                                  |
|        游戏画布区域               |
|                                  |
+----------------------------------+
| [角色头像]                       |
|  角色名称                        |
|  对话内容文本区域...             |
|  继续显示更多对话内容...         |
|                    [继续] [跳过] |
+----------------------------------+
```

### B.5 成就页面线框图
```
+----------------------------------+
|           成就系统               |
+----------------------------------+
| [全部] [已解锁] [未解锁]         |
+----------------------------------+
| [成就图标] 成就名称    [✓]      |
|           成就描述               |
|           解锁条件               |
+----------------------------------+
| [成就图标] 成就名称    [?]      |
|           ???                   |
|           ???                   |
+----------------------------------+
|        [返回游戏]               |
+----------------------------------+
```

## 附录C：设计规范（Design Specification）

### C.1 颜色设计方案

#### 主色调（悬疑风格）
- **主色**：#1a1a2e (深蓝紫色) - 神秘感
- **辅色**：#16213e (深蓝色) - 夜晚氛围
- **强调色**：#e94560 (红色) - 危险/重要提示
- **中性色**：#0f3460 (中蓝色) - 界面背景

#### 功能色彩
- **成功色**：#27ae60 (绿色) - 完成/正确
- **警告色**：#f39c12 (橙色) - 注意/提示
- **错误色**：#e74c3c (红色) - 错误/危险
- **信息色**：#3498db (蓝色) - 信息/链接

#### 文本色彩
- **主文本**：#ffffff (白色) - 主要内容
- **次文本**：#bdc3c7 (浅灰) - 辅助信息
- **禁用文本**：#7f8c8d (灰色) - 不可用状态

### C.2 字体设计方案

#### 字体族
- **主字体**：'Microsoft YaHei', 'PingFang SC', sans-serif
- **英文字体**：'Roboto', 'Arial', sans-serif  
- **等宽字体**：'Consolas', 'Monaco', monospace

#### 字体大小层级
- **标题1**：32px (页面主标题)
- **标题2**：24px (区块标题)
- **标题3**：20px (小节标题)
- **正文**：16px (主要内容)
- **小字**：14px (辅助信息)
- **微字**：12px (版权等)

#### 字重规范
- **粗体**：700 (重要标题)
- **中等**：500 (次要标题)
- **常规**：400 (正文内容)
- **细体**：300 (辅助文字)

### C.3 图像设计规范

#### 像素艺术风格
- **分辨率**：16x16, 32x32, 64x64像素单位
- **调色板**：限制在32色以内，保持复古感
- **抗锯齿**：禁用抗锯齿，保持像素清晰

#### 角色设计
- **主角**：侦探形象，深色风衣，经典造型
- **NPC**：差异化设计，便于识别
- **动画帧数**：4帧行走动画，2帧待机动画

#### 场景设计
- **透视**：3/4俯视角度
- **光影**：统一光源方向，营造氛围
- **细节**：丰富的环境细节，增强沉浸感

### C.4 布局设计规范

#### 网格系统
- **基础单位**：8px网格系统
- **容器宽度**：最大1200px，居中对齐
- **间距规范**：8px, 16px, 24px, 32px, 48px

#### 组件规范
- **按钮**：最小44px高度，8px圆角
- **输入框**：40px高度，4px圆角，1px边框
- **卡片**：8px圆角，0-4px阴影

#### 响应式断点
- **移动端**：< 768px
- **平板端**：768px - 1024px
- **桌面端**：> 1024px

### C.5 交互设计规范

#### 动画效果
- **过渡时间**：0.2s (快速), 0.3s (标准), 0.5s (慢速)
- **缓动函数**：ease-out (进入), ease-in (退出)
- **加载动画**：旋转或脉冲效果

#### 反馈机制
- **悬停效果**：颜色变化或轻微缩放
- **点击反馈**：按下效果和声音提示
- **状态指示**：清晰的视觉状态变化

---

## 附录D：主要页面详细设计图

### D.1 游戏主界面设计图

```css
/* 游戏主界面样式 */
.game-container {
  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

.game-header {
  background: rgba(15, 52, 96, 0.9);
  padding: 12px 24px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  backdrop-filter: blur(10px);
}

.game-canvas {
  border: 2px solid #0f3460;
  border-radius: 8px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
  background: #000;
}

.game-hud {
  background: rgba(15, 52, 96, 0.8);
  padding: 16px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
```

### D.2 对话系统设计图

```css
/* 对话框样式 */
.text-message {
  position: absolute;
  bottom: 20px;
  left: 20px;
  right: 20px;
  background: linear-gradient(145deg, #1a1a2e, #16213e);
  border: 2px solid #0f3460;
  border-radius: 12px;
  padding: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
}

.character-portrait {
  width: 64px;
  height: 64px;
  border-radius: 50%;
  border: 2px solid #e94560;
  float: left;
  margin-right: 16px;
}

.dialogue-text {
  color: #ffffff;
  font-size: 16px;
  line-height: 1.5;
  margin-bottom: 12px;
}
```

### D.3 成就系统设计图

```css
/* 成就页面样式 */
.achievement-container {
  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
  min-height: 100vh;
  padding: 24px;
}

.achievement-card {
  background: rgba(15, 52, 96, 0.6);
  border: 1px solid #0f3460;
  border-radius: 8px;
  padding: 16px;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  transition: all 0.3s ease;
}

.achievement-card:hover {
  background: rgba(15, 52, 96, 0.8);
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(233, 69, 96, 0.2);
}

.achievement-icon {
  width: 48px;
  height: 48px;
  margin-right: 16px;
  border-radius: 8px;
}

.achievement-unlocked {
  border-color: #27ae60;
}

.achievement-locked {
  opacity: 0.5;
  filter: grayscale(100%);
}
```

这个完善的项目计划提供了详细的工作量评估、技术方案、人时预计和设计规范，为项目的成功完成提供了全面的指导。